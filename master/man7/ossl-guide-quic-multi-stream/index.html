<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.openssl.org/master/man7/ossl-guide-quic-multi-stream/ rel=canonical><link href=../ossl-guide-quic-introduction/ rel=prev><link href=../ossl-guide-tls-client-block/ rel=next><link rel=icon href=../../images/favicon.ico><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.27"><title>ossl-guide-quic-multi-stream - OpenSSL Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head><body dir=ltr data-md-color-scheme=openssl data-md-color-primary=indigo data-md-color-accent=indigo><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#ossl-guide-quic-multi-stream class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="OpenSSL Documentation" class="md-header__button md-logo" aria-label="OpenSSL Documentation" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> OpenSSL Documentation </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> ossl-guide-quic-multi-stream </span></div></div></div><form class=md-header__option data-md-component=palette><input class=md-option data-md-color-media data-md-color-scheme=openssl data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg></label><input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg></label></form><script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg></label><nav class=md-search__options aria-label=Search><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/openssl/openssl title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg></div><div class=md-source__repository> GitHub </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link> Home </a></li><li class=md-tabs__item><a href=../../fips/ class=md-tabs__link> FIPS-140 </a></li><li class=md-tabs__item><a href=../../man1/ class=md-tabs__link> Commands </a></li><li class=md-tabs__item><a href=../../man3/ class=md-tabs__link> Libraries </a></li><li class=md-tabs__item><a href=../../man5/ class=md-tabs__link> File Formats </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../ class=md-tabs__link> Overviews </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="OpenSSL Documentation" class="md-nav__button md-logo" aria-label="OpenSSL Documentation" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg></a> OpenSSL Documentation </label><div class=md-nav__source><a href=https://github.com/openssl/openssl title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg></div><div class=md-source__repository> GitHub </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link title=Home><span class=md-ellipsis-custom> Home </span></a></li><li class=md-nav__item><a href=../../fips/ class=md-nav__link title=FIPS-140><span class=md-ellipsis-custom> FIPS-140 </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../man1/ class=md-nav__link><span class=md-ellipsis-custom> Commands </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../man3/ class=md-nav__link><span class=md-ellipsis-custom> Libraries </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../man5/ class=md-nav__link><span class=md-ellipsis-custom> File Formats </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis-custom> Overviews </span></a><label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true><label class=md-nav__title for=__nav_6><span class="md-nav__icon md-icon"></span> Overviews </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../EVP_ASYM_CIPHER-RSA/ class=md-nav__link title=EVP_ASYM_CIPHER-RSA><span class=md-ellipsis-custom> EVP_ASYM_CIPHER-RSA </span></a></li><li class=md-nav__item><a href=../EVP_ASYM_CIPHER-SM2/ class=md-nav__link title=EVP_ASYM_CIPHER-SM2><span class=md-ellipsis-custom> EVP_ASYM_CIPHER-SM2 </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-AES/ class=md-nav__link title=EVP_CIPHER-AES><span class=md-ellipsis-custom> EVP_CIPHER-AES </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-ARIA/ class=md-nav__link title=EVP_CIPHER-ARIA><span class=md-ellipsis-custom> EVP_CIPHER-ARIA </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-BLOWFISH/ class=md-nav__link title=EVP_CIPHER-BLOWFISH><span class=md-ellipsis-custom> EVP_CIPHER-BLOWFISH </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-CAMELLIA/ class=md-nav__link title=EVP_CIPHER-CAMELLIA><span class=md-ellipsis-custom> EVP_CIPHER-CAMELLIA </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-CAST/ class=md-nav__link title=EVP_CIPHER-CAST><span class=md-ellipsis-custom> EVP_CIPHER-CAST </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-CHACHA/ class=md-nav__link title=EVP_CIPHER-CHACHA><span class=md-ellipsis-custom> EVP_CIPHER-CHACHA </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-DES/ class=md-nav__link title=EVP_CIPHER-DES><span class=md-ellipsis-custom> EVP_CIPHER-DES </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-IDEA/ class=md-nav__link title=EVP_CIPHER-IDEA><span class=md-ellipsis-custom> EVP_CIPHER-IDEA </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-NULL/ class=md-nav__link title=EVP_CIPHER-NULL><span class=md-ellipsis-custom> EVP_CIPHER-NULL </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-RC2/ class=md-nav__link title=EVP_CIPHER-RC2><span class=md-ellipsis-custom> EVP_CIPHER-RC2 </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-RC4/ class=md-nav__link title=EVP_CIPHER-RC4><span class=md-ellipsis-custom> EVP_CIPHER-RC4 </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-RC5/ class=md-nav__link title=EVP_CIPHER-RC5><span class=md-ellipsis-custom> EVP_CIPHER-RC5 </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-SEED/ class=md-nav__link title=EVP_CIPHER-SEED><span class=md-ellipsis-custom> EVP_CIPHER-SEED </span></a></li><li class=md-nav__item><a href=../EVP_CIPHER-SM4/ class=md-nav__link title=EVP_CIPHER-SM4><span class=md-ellipsis-custom> EVP_CIPHER-SM4 </span></a></li><li class=md-nav__item><a href=../EVP_KDF-ARGON2/ class=md-nav__link title=EVP_KDF-ARGON2><span class=md-ellipsis-custom> EVP_KDF-ARGON2 </span></a></li><li class=md-nav__item><a href=../EVP_KDF-HKDF/ class=md-nav__link title=EVP_KDF-HKDF><span class=md-ellipsis-custom> EVP_KDF-HKDF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-HMAC-DRBG/ class=md-nav__link title=EVP_KDF-HMAC-DRBG><span class=md-ellipsis-custom> EVP_KDF-HMAC-DRBG </span></a></li><li class=md-nav__item><a href=../EVP_KDF-KB/ class=md-nav__link title=EVP_KDF-KB><span class=md-ellipsis-custom> EVP_KDF-KB </span></a></li><li class=md-nav__item><a href=../EVP_KDF-KRB5KDF/ class=md-nav__link title=EVP_KDF-KRB5KDF><span class=md-ellipsis-custom> EVP_KDF-KRB5KDF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-PBKDF1/ class=md-nav__link title=EVP_KDF-PBKDF1><span class=md-ellipsis-custom> EVP_KDF-PBKDF1 </span></a></li><li class=md-nav__item><a href=../EVP_KDF-PBKDF2/ class=md-nav__link title=EVP_KDF-PBKDF2><span class=md-ellipsis-custom> EVP_KDF-PBKDF2 </span></a></li><li class=md-nav__item><a href=../EVP_KDF-PKCS12KDF/ class=md-nav__link title=EVP_KDF-PKCS12KDF><span class=md-ellipsis-custom> EVP_KDF-PKCS12KDF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-PVKKDF/ class=md-nav__link title=EVP_KDF-PVKKDF><span class=md-ellipsis-custom> EVP_KDF-PVKKDF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-SCRYPT/ class=md-nav__link title=EVP_KDF-SCRYPT><span class=md-ellipsis-custom> EVP_KDF-SCRYPT </span></a></li><li class=md-nav__item><a href=../EVP_KDF-SS/ class=md-nav__link title=EVP_KDF-SS><span class=md-ellipsis-custom> EVP_KDF-SS </span></a></li><li class=md-nav__item><a href=../EVP_KDF-SSHKDF/ class=md-nav__link title=EVP_KDF-SSHKDF><span class=md-ellipsis-custom> EVP_KDF-SSHKDF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-TLS13_KDF/ class=md-nav__link title=EVP_KDF-TLS13_KDF><span class=md-ellipsis-custom> EVP_KDF-TLS13_KDF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-TLS1_PRF/ class=md-nav__link title=EVP_KDF-TLS1_PRF><span class=md-ellipsis-custom> EVP_KDF-TLS1_PRF </span></a></li><li class=md-nav__item><a href=../EVP_KDF-X942-ASN1/ class=md-nav__link title=EVP_KDF-X942-ASN1><span class=md-ellipsis-custom> EVP_KDF-X942-ASN1 </span></a></li><li class=md-nav__item><a href=../EVP_KDF-X942-CONCAT/ class=md-nav__link title=EVP_KDF-X942-CONCAT><span class=md-ellipsis-custom> EVP_KDF-X942-CONCAT </span></a></li><li class=md-nav__item><a href=../EVP_KDF-X963/ class=md-nav__link title=EVP_KDF-X963><span class=md-ellipsis-custom> EVP_KDF-X963 </span></a></li><li class=md-nav__item><a href=../EVP_KEM-EC/ class=md-nav__link title=EVP_KEM-EC><span class=md-ellipsis-custom> EVP_KEM-EC </span></a></li><li class=md-nav__item><a href=../EVP_KEM-RSA/ class=md-nav__link title=EVP_KEM-RSA><span class=md-ellipsis-custom> EVP_KEM-RSA </span></a></li><li class=md-nav__item><a href=../EVP_KEM-X25519/ class=md-nav__link title=EVP_KEM-X25519><span class=md-ellipsis-custom> EVP_KEM-X25519 </span></a></li><li class=md-nav__item><a href=../EVP_KEM-X25519 class=md-nav__link title=EVP_KEM-X448><span class=md-ellipsis-custom> EVP_KEM-X448 </span></a></li><li class=md-nav__item><a href=../EVP_KEYEXCH-DH/ class=md-nav__link title=EVP_KEYEXCH-DH><span class=md-ellipsis-custom> EVP_KEYEXCH-DH </span></a></li><li class=md-nav__item><a href=../EVP_KEYEXCH-ECDH/ class=md-nav__link title=EVP_KEYEXCH-ECDH><span class=md-ellipsis-custom> EVP_KEYEXCH-ECDH </span></a></li><li class=md-nav__item><a href=../EVP_KEYEXCH-X25519/ class=md-nav__link title=EVP_KEYEXCH-X25519><span class=md-ellipsis-custom> EVP_KEYEXCH-X25519 </span></a></li><li class=md-nav__item><a href=../EVP_KEYEXCH-X25519 class=md-nav__link title=EVP_KEYEXCH-X448><span class=md-ellipsis-custom> EVP_KEYEXCH-X448 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_KEYMGMT-CMAC><span class=md-ellipsis-custom> EVP_KEYMGMT-CMAC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-DH class=md-nav__link title=EVP_KEYMGMT-DH><span class=md-ellipsis-custom> EVP_KEYMGMT-DH </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-DH class=md-nav__link title=EVP_KEYMGMT-DHX><span class=md-ellipsis-custom> EVP_KEYMGMT-DHX </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-DSA class=md-nav__link title=EVP_KEYMGMT-DSA><span class=md-ellipsis-custom> EVP_KEYMGMT-DSA </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-EC class=md-nav__link title=EVP_KEYMGMT-EC><span class=md-ellipsis-custom> EVP_KEYMGMT-EC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_KEYMGMT-ED25519><span class=md-ellipsis-custom> EVP_KEYMGMT-ED25519 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_KEYMGMT-ED448><span class=md-ellipsis-custom> EVP_KEYMGMT-ED448 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_KEYMGMT-HMAC><span class=md-ellipsis-custom> EVP_KEYMGMT-HMAC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_KEYMGMT-Poly1305><span class=md-ellipsis-custom> EVP_KEYMGMT-Poly1305 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-RSA class=md-nav__link title=EVP_KEYMGMT-RSA><span class=md-ellipsis-custom> EVP_KEYMGMT-RSA </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-SM2 class=md-nav__link title=EVP_KEYMGMT-SM2><span class=md-ellipsis-custom> EVP_KEYMGMT-SM2 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_KEYMGMT-Siphash><span class=md-ellipsis-custom> EVP_KEYMGMT-Siphash </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_KEYMGMT-X25519><span class=md-ellipsis-custom> EVP_KEYMGMT-X25519 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_KEYMGMT-X448><span class=md-ellipsis-custom> EVP_KEYMGMT-X448 </span></a></li><li class=md-nav__item><a href=../EVP_MAC-BLAKE2/ class=md-nav__link title=EVP_MAC-BLAKE2><span class=md-ellipsis-custom> EVP_MAC-BLAKE2 </span></a></li><li class=md-nav__item><a href=../EVP_MAC-BLAKE2 class=md-nav__link title=EVP_MAC-BLAKE2BMAC><span class=md-ellipsis-custom> EVP_MAC-BLAKE2BMAC </span></a></li><li class=md-nav__item><a href=../EVP_MAC-BLAKE2 class=md-nav__link title=EVP_MAC-BLAKE2SMAC><span class=md-ellipsis-custom> EVP_MAC-BLAKE2SMAC </span></a></li><li class=md-nav__item><a href=../EVP_MAC-CMAC/ class=md-nav__link title=EVP_MAC-CMAC><span class=md-ellipsis-custom> EVP_MAC-CMAC </span></a></li><li class=md-nav__item><a href=../EVP_MAC-GMAC/ class=md-nav__link title=EVP_MAC-GMAC><span class=md-ellipsis-custom> EVP_MAC-GMAC </span></a></li><li class=md-nav__item><a href=../EVP_MAC-HMAC/ class=md-nav__link title=EVP_MAC-HMAC><span class=md-ellipsis-custom> EVP_MAC-HMAC </span></a></li><li class=md-nav__item><a href=../EVP_MAC-KMAC/ class=md-nav__link title=EVP_MAC-KMAC><span class=md-ellipsis-custom> EVP_MAC-KMAC </span></a></li><li class=md-nav__item><a href=../EVP_MAC-KMAC class=md-nav__link title=EVP_MAC-KMAC128><span class=md-ellipsis-custom> EVP_MAC-KMAC128 </span></a></li><li class=md-nav__item><a href=../EVP_MAC-KMAC class=md-nav__link title=EVP_MAC-KMAC256><span class=md-ellipsis-custom> EVP_MAC-KMAC256 </span></a></li><li class=md-nav__item><a href=../EVP_MAC-Poly1305/ class=md-nav__link title=EVP_MAC-Poly1305><span class=md-ellipsis-custom> EVP_MAC-Poly1305 </span></a></li><li class=md-nav__item><a href=../EVP_MAC-Siphash/ class=md-nav__link title=EVP_MAC-Siphash><span class=md-ellipsis-custom> EVP_MAC-Siphash </span></a></li><li class=md-nav__item><a href=../EVP_MD-BLAKE2/ class=md-nav__link title=EVP_MD-BLAKE2><span class=md-ellipsis-custom> EVP_MD-BLAKE2 </span></a></li><li class=md-nav__item><a href=../EVP_MD-KECCAK/ class=md-nav__link title=EVP_MD-KECCAK><span class=md-ellipsis-custom> EVP_MD-KECCAK </span></a></li><li class=md-nav__item><a href=../EVP_MD-SHAKE class=md-nav__link title=EVP_MD-KECCAK-KMAC><span class=md-ellipsis-custom> EVP_MD-KECCAK-KMAC </span></a></li><li class=md-nav__item><a href=../EVP_MD-MD2/ class=md-nav__link title=EVP_MD-MD2><span class=md-ellipsis-custom> EVP_MD-MD2 </span></a></li><li class=md-nav__item><a href=../EVP_MD-MD4/ class=md-nav__link title=EVP_MD-MD4><span class=md-ellipsis-custom> EVP_MD-MD4 </span></a></li><li class=md-nav__item><a href=../EVP_MD-MD5/ class=md-nav__link title=EVP_MD-MD5><span class=md-ellipsis-custom> EVP_MD-MD5 </span></a></li><li class=md-nav__item><a href=../EVP_MD-MD5-SHA1/ class=md-nav__link title=EVP_MD-MD5-SHA1><span class=md-ellipsis-custom> EVP_MD-MD5-SHA1 </span></a></li><li class=md-nav__item><a href=../EVP_MD-MDC2/ class=md-nav__link title=EVP_MD-MDC2><span class=md-ellipsis-custom> EVP_MD-MDC2 </span></a></li><li class=md-nav__item><a href=../EVP_MD-NULL/ class=md-nav__link title=EVP_MD-NULL><span class=md-ellipsis-custom> EVP_MD-NULL </span></a></li><li class=md-nav__item><a href=../EVP_MD-RIPEMD160/ class=md-nav__link title=EVP_MD-RIPEMD160><span class=md-ellipsis-custom> EVP_MD-RIPEMD160 </span></a></li><li class=md-nav__item><a href=../EVP_MD-SHA1/ class=md-nav__link title=EVP_MD-SHA1><span class=md-ellipsis-custom> EVP_MD-SHA1 </span></a></li><li class=md-nav__item><a href=../EVP_MD-SHA2/ class=md-nav__link title=EVP_MD-SHA2><span class=md-ellipsis-custom> EVP_MD-SHA2 </span></a></li><li class=md-nav__item><a href=../EVP_MD-SHA3/ class=md-nav__link title=EVP_MD-SHA3><span class=md-ellipsis-custom> EVP_MD-SHA3 </span></a></li><li class=md-nav__item><a href=../EVP_MD-SHAKE/ class=md-nav__link title=EVP_MD-SHAKE><span class=md-ellipsis-custom> EVP_MD-SHAKE </span></a></li><li class=md-nav__item><a href=../EVP_MD-SM3/ class=md-nav__link title=EVP_MD-SM3><span class=md-ellipsis-custom> EVP_MD-SM3 </span></a></li><li class=md-nav__item><a href=../EVP_MD-WHIRLPOOL/ class=md-nav__link title=EVP_MD-WHIRLPOOL><span class=md-ellipsis-custom> EVP_MD-WHIRLPOOL </span></a></li><li class=md-nav__item><a href=../EVP_MD-common/ class=md-nav__link title=EVP_MD-common><span class=md-ellipsis-custom> EVP_MD-common </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_PKEY-CMAC><span class=md-ellipsis-custom> EVP_PKEY-CMAC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-DH/ class=md-nav__link title=EVP_PKEY-DH><span class=md-ellipsis-custom> EVP_PKEY-DH </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-DH class=md-nav__link title=EVP_PKEY-DHX><span class=md-ellipsis-custom> EVP_PKEY-DHX </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-DSA/ class=md-nav__link title=EVP_PKEY-DSA><span class=md-ellipsis-custom> EVP_PKEY-DSA </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-EC/ class=md-nav__link title=EVP_PKEY-EC><span class=md-ellipsis-custom> EVP_PKEY-EC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_PKEY-ED25519><span class=md-ellipsis-custom> EVP_PKEY-ED25519 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_PKEY-ED448><span class=md-ellipsis-custom> EVP_PKEY-ED448 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-FFC/ class=md-nav__link title=EVP_PKEY-FFC><span class=md-ellipsis-custom> EVP_PKEY-FFC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC/ class=md-nav__link title=EVP_PKEY-HMAC><span class=md-ellipsis-custom> EVP_PKEY-HMAC </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_PKEY-Poly1305><span class=md-ellipsis-custom> EVP_PKEY-Poly1305 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-RSA/ class=md-nav__link title=EVP_PKEY-RSA><span class=md-ellipsis-custom> EVP_PKEY-RSA </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-SM2/ class=md-nav__link title=EVP_PKEY-SM2><span class=md-ellipsis-custom> EVP_PKEY-SM2 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-HMAC class=md-nav__link title=EVP_PKEY-Siphash><span class=md-ellipsis-custom> EVP_PKEY-Siphash </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519/ class=md-nav__link title=EVP_PKEY-X25519><span class=md-ellipsis-custom> EVP_PKEY-X25519 </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-X25519 class=md-nav__link title=EVP_PKEY-X448><span class=md-ellipsis-custom> EVP_PKEY-X448 </span></a></li><li class=md-nav__item><a href=../EVP_RAND/ class=md-nav__link title=EVP_RAND><span class=md-ellipsis-custom> EVP_RAND </span></a></li><li class=md-nav__item><a href=../EVP_RAND-CTR-DRBG/ class=md-nav__link title=EVP_RAND-CTR-DRBG><span class=md-ellipsis-custom> EVP_RAND-CTR-DRBG </span></a></li><li class=md-nav__item><a href=../EVP_RAND-HASH-DRBG/ class=md-nav__link title=EVP_RAND-HASH-DRBG><span class=md-ellipsis-custom> EVP_RAND-HASH-DRBG </span></a></li><li class=md-nav__item><a href=../EVP_RAND-HMAC-DRBG/ class=md-nav__link title=EVP_RAND-HMAC-DRBG><span class=md-ellipsis-custom> EVP_RAND-HMAC-DRBG </span></a></li><li class=md-nav__item><a href=../EVP_RAND-JITTER/ class=md-nav__link title=EVP_RAND-JITTER><span class=md-ellipsis-custom> EVP_RAND-JITTER </span></a></li><li class=md-nav__item><a href=../EVP_RAND-SEED-SRC/ class=md-nav__link title=EVP_RAND-SEED-SRC><span class=md-ellipsis-custom> EVP_RAND-SEED-SRC </span></a></li><li class=md-nav__item><a href=../EVP_RAND-TEST-RAND/ class=md-nav__link title=EVP_RAND-TEST-RAND><span class=md-ellipsis-custom> EVP_RAND-TEST-RAND </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-HMAC class=md-nav__link title=EVP_SIGNATURE-CMAC><span class=md-ellipsis-custom> EVP_SIGNATURE-CMAC </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-DSA/ class=md-nav__link title=EVP_SIGNATURE-DSA><span class=md-ellipsis-custom> EVP_SIGNATURE-DSA </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-ECDSA/ class=md-nav__link title=EVP_SIGNATURE-ECDSA><span class=md-ellipsis-custom> EVP_SIGNATURE-ECDSA </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-ED25519/ class=md-nav__link title=EVP_SIGNATURE-ED25519><span class=md-ellipsis-custom> EVP_SIGNATURE-ED25519 </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-ED25519 class=md-nav__link title=EVP_SIGNATURE-ED448><span class=md-ellipsis-custom> EVP_SIGNATURE-ED448 </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-HMAC/ class=md-nav__link title=EVP_SIGNATURE-HMAC><span class=md-ellipsis-custom> EVP_SIGNATURE-HMAC </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-HMAC class=md-nav__link title=EVP_SIGNATURE-Poly1305><span class=md-ellipsis-custom> EVP_SIGNATURE-Poly1305 </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-RSA/ class=md-nav__link title=EVP_SIGNATURE-RSA><span class=md-ellipsis-custom> EVP_SIGNATURE-RSA </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-HMAC class=md-nav__link title=EVP_SIGNATURE-Siphash><span class=md-ellipsis-custom> EVP_SIGNATURE-Siphash </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-ED25519 class=md-nav__link title=Ed25519><span class=md-ellipsis-custom> Ed25519 </span></a></li><li class=md-nav__item><a href=../EVP_SIGNATURE-ED25519 class=md-nav__link title=Ed448><span class=md-ellipsis-custom> Ed448 </span></a></li><li class=md-nav__item><a href=../openssl_user_macros class=md-nav__link title=OPENSSL_API_COMPAT><span class=md-ellipsis-custom> OPENSSL_API_COMPAT </span></a></li><li class=md-nav__item><a href=../openssl_user_macros class=md-nav__link title=OPENSSL_NO_DEPRECATED><span class=md-ellipsis-custom> OPENSSL_NO_DEPRECATED </span></a></li><li class=md-nav__item><a href=../OSSL_PROVIDER-FIPS/ class=md-nav__link title=OSSL_PROVIDER-FIPS><span class=md-ellipsis-custom> OSSL_PROVIDER-FIPS </span></a></li><li class=md-nav__item><a href=../OSSL_PROVIDER-base/ class=md-nav__link title=OSSL_PROVIDER-base><span class=md-ellipsis-custom> OSSL_PROVIDER-base </span></a></li><li class=md-nav__item><a href=../OSSL_PROVIDER-default/ class=md-nav__link title=OSSL_PROVIDER-default><span class=md-ellipsis-custom> OSSL_PROVIDER-default </span></a></li><li class=md-nav__item><a href=../OSSL_PROVIDER-legacy/ class=md-nav__link title=OSSL_PROVIDER-legacy><span class=md-ellipsis-custom> OSSL_PROVIDER-legacy </span></a></li><li class=md-nav__item><a href=../OSSL_PROVIDER-null/ class=md-nav__link title=OSSL_PROVIDER-null><span class=md-ellipsis-custom> OSSL_PROVIDER-null </span></a></li><li class=md-nav__item><a href=../OSSL_STORE-winstore/ class=md-nav__link title=OSSL_STORE-winstore><span class=md-ellipsis-custom> OSSL_STORE-winstore </span></a></li><li class=md-nav__item><a href=../RAND/ class=md-nav__link title=RAND><span class=md-ellipsis-custom> RAND </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-RSA class=md-nav__link title=RSA><span class=md-ellipsis-custom> RSA </span></a></li><li class=md-nav__item><a href=../RSA-PSS/ class=md-nav__link title=RSA-PSS><span class=md-ellipsis-custom> RSA-PSS </span></a></li><li class=md-nav__item><a href=../EVP_PKEY-SM2 class=md-nav__link title=SM2><span class=md-ellipsis-custom> SM2 </span></a></li><li class=md-nav__item><a href=../X25519/ class=md-nav__link title=X25519><span class=md-ellipsis-custom> X25519 </span></a></li><li class=md-nav__item><a href=../X25519 class=md-nav__link title=X448><span class=md-ellipsis-custom> X448 </span></a></li><li class=md-nav__item><a href=../bio/ class=md-nav__link title=bio><span class=md-ellipsis-custom> bio </span></a></li><li class=md-nav__item><a href=../ossl-guide-libcrypto-introduction class=md-nav__link title=crypto><span class=md-ellipsis-custom> crypto </span></a></li><li class=md-nav__item><a href=../ct/ class=md-nav__link title=ct><span class=md-ellipsis-custom> ct </span></a></li><li class=md-nav__item><a href=../des_modes/ class=md-nav__link title=des_modes><span class=md-ellipsis-custom> des_modes </span></a></li><li class=md-nav__item><a href=../evp/ class=md-nav__link title=evp><span class=md-ellipsis-custom> evp </span></a></li><li class=md-nav__item><a href=../fips_module/ class=md-nav__link title=fips_module><span class=md-ellipsis-custom> fips_module </span></a></li><li class=md-nav__item><a href=../life_cycle-cipher/ class=md-nav__link title=life_cycle-cipher><span class=md-ellipsis-custom> life_cycle-cipher </span></a></li><li class=md-nav__item><a href=../life_cycle-digest/ class=md-nav__link title=life_cycle-digest><span class=md-ellipsis-custom> life_cycle-digest </span></a></li><li class=md-nav__item><a href=../life_cycle-kdf/ class=md-nav__link title=life_cycle-kdf><span class=md-ellipsis-custom> life_cycle-kdf </span></a></li><li class=md-nav__item><a href=../life_cycle-mac/ class=md-nav__link title=life_cycle-mac><span class=md-ellipsis-custom> life_cycle-mac </span></a></li><li class=md-nav__item><a href=../life_cycle-pkey/ class=md-nav__link title=life_cycle-pkey><span class=md-ellipsis-custom> life_cycle-pkey </span></a></li><li class=md-nav__item><a href=../life_cycle-rand/ class=md-nav__link title=life_cycle-rand><span class=md-ellipsis-custom> life_cycle-rand </span></a></li><li class=md-nav__item><a href=../ossl-guide-migration class=md-nav__link title=migration_guide><span class=md-ellipsis-custom> migration_guide </span></a></li><li class=md-nav__item><a href=../openssl-core.h/ class=md-nav__link title=openssl-core.h><span class=md-ellipsis-custom> openssl-core.h </span></a></li><li class=md-nav__item><a href=../openssl-core_dispatch.h/ class=md-nav__link title=openssl-core_dispatch.h><span class=md-ellipsis-custom> openssl-core_dispatch.h </span></a></li><li class=md-nav__item><a href=../openssl-core_names.h/ class=md-nav__link title=openssl-core_names.h><span class=md-ellipsis-custom> openssl-core_names.h </span></a></li><li class=md-nav__item><a href=../openssl-env/ class=md-nav__link title=openssl-env><span class=md-ellipsis-custom> openssl-env </span></a></li><li class=md-nav__item><a href=../openssl-glossary/ class=md-nav__link title=openssl-glossary><span class=md-ellipsis-custom> openssl-glossary </span></a></li><li class=md-nav__item><a href=../openssl-qlog/ class=md-nav__link title=openssl-qlog><span class=md-ellipsis-custom> openssl-qlog </span></a></li><li class=md-nav__item><a href=../openssl-quic/ class=md-nav__link title=openssl-quic><span class=md-ellipsis-custom> openssl-quic </span></a></li><li class=md-nav__item><a href=../openssl-threads/ class=md-nav__link title=openssl-threads><span class=md-ellipsis-custom> openssl-threads </span></a></li><li class=md-nav__item><a href=../openssl_user_macros/ class=md-nav__link title=openssl_user_macros><span class=md-ellipsis-custom> openssl_user_macros </span></a></li><li class=md-nav__item><a href=../ossl-guide-introduction/ class=md-nav__link title=ossl-guide-introduction><span class=md-ellipsis-custom> ossl-guide-introduction </span></a></li><li class=md-nav__item><a href=../ossl-guide-libcrypto-introduction/ class=md-nav__link title=ossl-guide-libcrypto-introduction><span class=md-ellipsis-custom> ossl-guide-libcrypto-introduction </span></a></li><li class=md-nav__item><a href=../ossl-guide-libraries-introduction/ class=md-nav__link title=ossl-guide-libraries-introduction><span class=md-ellipsis-custom> ossl-guide-libraries-introduction </span></a></li><li class=md-nav__item><a href=../ossl-guide-libssl-introduction/ class=md-nav__link title=ossl-guide-libssl-introduction><span class=md-ellipsis-custom> ossl-guide-libssl-introduction </span></a></li><li class=md-nav__item><a href=../ossl-guide-migration/ class=md-nav__link title=ossl-guide-migration><span class=md-ellipsis-custom> ossl-guide-migration </span></a></li><li class=md-nav__item><a href=../ossl-guide-quic-client-block/ class=md-nav__link title=ossl-guide-quic-client-block><span class=md-ellipsis-custom> ossl-guide-quic-client-block </span></a></li><li class=md-nav__item><a href=../ossl-guide-quic-client-non-block/ class=md-nav__link title=ossl-guide-quic-client-non-block><span class=md-ellipsis-custom> ossl-guide-quic-client-non-block </span></a></li><li class=md-nav__item><a href=../ossl-guide-quic-introduction/ class=md-nav__link title=ossl-guide-quic-introduction><span class=md-ellipsis-custom> ossl-guide-quic-introduction </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis-custom> ossl-guide-quic-multi-stream </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis-custom> ossl-guide-quic-multi-stream </span></a><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#name class=md-nav__link><span class=md-ellipsis> NAME </span></a></li><li class=md-nav__item><a href=#introduction class=md-nav__link><span class=md-ellipsis> INTRODUCTION </span></a></li><li class=md-nav__item><a href=#quic-streams class=md-nav__link><span class=md-ellipsis> QUIC STREAMS </span></a></li><li class=md-nav__item><a href=#the-default-stream class=md-nav__link><span class=md-ellipsis> THE DEFAULT STREAM </span></a></li><li class=md-nav__item><a href=#creating-new-streams class=md-nav__link><span class=md-ellipsis> CREATING NEW STREAMS </span></a></li><li class=md-nav__item><a href=#using-a-stream-to-send-and-receive-data class=md-nav__link><span class=md-ellipsis> USING A STREAM TO SEND AND RECEIVE DATA </span></a></li><li class=md-nav__item><a href=#streams-and-connections class=md-nav__link><span class=md-ellipsis> STREAMS AND CONNECTIONS </span></a></li><li class=md-nav__item><a href=#simple-multi-stream-quic-client-example class=md-nav__link><span class=md-ellipsis> SIMPLE MULTI-STREAM QUIC CLIENT EXAMPLE </span></a><nav class=md-nav aria-label="SIMPLE MULTI-STREAM QUIC CLIENT EXAMPLE"><ul class=md-nav__list><li class=md-nav__item><a href=#disabling-the-default-stream class=md-nav__link><span class=md-ellipsis> Disabling the default stream </span></a></li><li class=md-nav__item><a href=#creating-the-request-streams class=md-nav__link><span class=md-ellipsis> Creating the request streams </span></a></li><li class=md-nav__item><a href=#writing-data-to-the-streams class=md-nav__link><span class=md-ellipsis> Writing data to the streams </span></a></li><li class=md-nav__item><a href=#reading-data-from-a-stream class=md-nav__link><span class=md-ellipsis> Reading data from a stream </span></a></li><li class=md-nav__item><a href=#accepting-an-incoming-stream class=md-nav__link><span class=md-ellipsis> Accepting an incoming stream </span></a></li><li class=md-nav__item><a href=#cleaning-up-the-streams class=md-nav__link><span class=md-ellipsis> Cleaning up the streams </span></a></li></ul></nav></li><li class=md-nav__item><a href=#see-also class=md-nav__link><span class=md-ellipsis> SEE ALSO </span></a></li><li class=md-nav__item><a href=#copyright class=md-nav__link><span class=md-ellipsis> COPYRIGHT </span></a></li></ul></nav></li><li class=md-nav__item><a href=../ossl-guide-tls-client-block/ class=md-nav__link title=ossl-guide-tls-client-block><span class=md-ellipsis-custom> ossl-guide-tls-client-block </span></a></li><li class=md-nav__item><a href=../ossl-guide-tls-client-non-block/ class=md-nav__link title=ossl-guide-tls-client-non-block><span class=md-ellipsis-custom> ossl-guide-tls-client-non-block </span></a></li><li class=md-nav__item><a href=../ossl-guide-tls-introduction/ class=md-nav__link title=ossl-guide-tls-introduction><span class=md-ellipsis-custom> ossl-guide-tls-introduction </span></a></li><li class=md-nav__item><a href=../ossl-guide-tls-server-block/ class=md-nav__link title=ossl-guide-tls-server-block><span class=md-ellipsis-custom> ossl-guide-tls-server-block </span></a></li><li class=md-nav__item><a href=../ossl_store/ class=md-nav__link title=ossl_store><span class=md-ellipsis-custom> ossl_store </span></a></li><li class=md-nav__item><a href=../ossl_store-file/ class=md-nav__link title=ossl_store-file><span class=md-ellipsis-custom> ossl_store-file </span></a></li><li class=md-nav__item><a href=../passphrase-encoding/ class=md-nav__link title=passphrase-encoding><span class=md-ellipsis-custom> passphrase-encoding </span></a></li><li class=md-nav__item><a href=../property/ class=md-nav__link title=property><span class=md-ellipsis-custom> property </span></a></li><li class=md-nav__item><a href=../provider/ class=md-nav__link title=provider><span class=md-ellipsis-custom> provider </span></a></li><li class=md-nav__item><a href=../provider-asym_cipher/ class=md-nav__link title=provider-asym_cipher><span class=md-ellipsis-custom> provider-asym_cipher </span></a></li><li class=md-nav__item><a href=../provider-base/ class=md-nav__link title=provider-base><span class=md-ellipsis-custom> provider-base </span></a></li><li class=md-nav__item><a href=../provider-cipher/ class=md-nav__link title=provider-cipher><span class=md-ellipsis-custom> provider-cipher </span></a></li><li class=md-nav__item><a href=../provider-decoder/ class=md-nav__link title=provider-decoder><span class=md-ellipsis-custom> provider-decoder </span></a></li><li class=md-nav__item><a href=../provider-digest/ class=md-nav__link title=provider-digest><span class=md-ellipsis-custom> provider-digest </span></a></li><li class=md-nav__item><a href=../provider-encoder/ class=md-nav__link title=provider-encoder><span class=md-ellipsis-custom> provider-encoder </span></a></li><li class=md-nav__item><a href=../provider-kdf/ class=md-nav__link title=provider-kdf><span class=md-ellipsis-custom> provider-kdf </span></a></li><li class=md-nav__item><a href=../provider-kem/ class=md-nav__link title=provider-kem><span class=md-ellipsis-custom> provider-kem </span></a></li><li class=md-nav__item><a href=../provider-keyexch/ class=md-nav__link title=provider-keyexch><span class=md-ellipsis-custom> provider-keyexch </span></a></li><li class=md-nav__item><a href=../provider-keymgmt/ class=md-nav__link title=provider-keymgmt><span class=md-ellipsis-custom> provider-keymgmt </span></a></li><li class=md-nav__item><a href=../provider-mac/ class=md-nav__link title=provider-mac><span class=md-ellipsis-custom> provider-mac </span></a></li><li class=md-nav__item><a href=../provider-object/ class=md-nav__link title=provider-object><span class=md-ellipsis-custom> provider-object </span></a></li><li class=md-nav__item><a href=../provider-rand/ class=md-nav__link title=provider-rand><span class=md-ellipsis-custom> provider-rand </span></a></li><li class=md-nav__item><a href=../provider-signature/ class=md-nav__link title=provider-signature><span class=md-ellipsis-custom> provider-signature </span></a></li><li class=md-nav__item><a href=../provider-storemgmt/ class=md-nav__link title=provider-storemgmt><span class=md-ellipsis-custom> provider-storemgmt </span></a></li><li class=md-nav__item><a href=../proxy-certificates/ class=md-nav__link title=proxy-certificates><span class=md-ellipsis-custom> proxy-certificates </span></a></li><li class=md-nav__item><a href=../ossl-guide-libssl-introduction class=md-nav__link title=ssl><span class=md-ellipsis-custom> ssl </span></a></li><li class=md-nav__item><a href=../x509/ class=md-nav__link title=x509><span class=md-ellipsis-custom> x509 </span></a></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#name class=md-nav__link><span class=md-ellipsis> NAME </span></a></li><li class=md-nav__item><a href=#introduction class=md-nav__link><span class=md-ellipsis> INTRODUCTION </span></a></li><li class=md-nav__item><a href=#quic-streams class=md-nav__link><span class=md-ellipsis> QUIC STREAMS </span></a></li><li class=md-nav__item><a href=#the-default-stream class=md-nav__link><span class=md-ellipsis> THE DEFAULT STREAM </span></a></li><li class=md-nav__item><a href=#creating-new-streams class=md-nav__link><span class=md-ellipsis> CREATING NEW STREAMS </span></a></li><li class=md-nav__item><a href=#using-a-stream-to-send-and-receive-data class=md-nav__link><span class=md-ellipsis> USING A STREAM TO SEND AND RECEIVE DATA </span></a></li><li class=md-nav__item><a href=#streams-and-connections class=md-nav__link><span class=md-ellipsis> STREAMS AND CONNECTIONS </span></a></li><li class=md-nav__item><a href=#simple-multi-stream-quic-client-example class=md-nav__link><span class=md-ellipsis> SIMPLE MULTI-STREAM QUIC CLIENT EXAMPLE </span></a><nav class=md-nav aria-label="SIMPLE MULTI-STREAM QUIC CLIENT EXAMPLE"><ul class=md-nav__list><li class=md-nav__item><a href=#disabling-the-default-stream class=md-nav__link><span class=md-ellipsis> Disabling the default stream </span></a></li><li class=md-nav__item><a href=#creating-the-request-streams class=md-nav__link><span class=md-ellipsis> Creating the request streams </span></a></li><li class=md-nav__item><a href=#writing-data-to-the-streams class=md-nav__link><span class=md-ellipsis> Writing data to the streams </span></a></li><li class=md-nav__item><a href=#reading-data-from-a-stream class=md-nav__link><span class=md-ellipsis> Reading data from a stream </span></a></li><li class=md-nav__item><a href=#accepting-an-incoming-stream class=md-nav__link><span class=md-ellipsis> Accepting an incoming stream </span></a></li><li class=md-nav__item><a href=#cleaning-up-the-streams class=md-nav__link><span class=md-ellipsis> Cleaning up the streams </span></a></li></ul></nav></li><li class=md-nav__item><a href=#see-also class=md-nav__link><span class=md-ellipsis> SEE ALSO </span></a></li><li class=md-nav__item><a href=#copyright class=md-nav__link><span class=md-ellipsis> COPYRIGHT </span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><h1 id=ossl-guide-quic-multi-stream>ossl-guide-quic-multi-stream<a class=headerlink href=#ossl-guide-quic-multi-stream title="Permanent link">&para;</a></h1><h2 id=name>NAME<a class=headerlink href=#name title="Permanent link">&para;</a></h2><p>ossl-guide-quic-multi-stream - OpenSSL Guide: Writing a simple multi-stream QUIC client</p><h2 id=introduction>INTRODUCTION<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2><p>This page will introduce some important concepts required to write a simple QUIC multi-stream application. It assumes a basic understanding of QUIC and how it is used in OpenSSL. See <a href=../ossl-guide-quic-introduction/ >ossl-guide-quic-introduction(7)</a> and <a href=../ossl-guide-quic-client-block/ >ossl-guide-quic-client-block(7)</a>.</p><h2 id=quic-streams>QUIC STREAMS<a class=headerlink href=#quic-streams title="Permanent link">&para;</a></h2><p>In a QUIC multi-stream application we separate out the concepts of a QUIC "connection" and a QUIC "stream". A connection object represents the overarching details of the connection between a client and a server including all its negotiated and configured parameters. We use the <strong>SSL</strong> object for that in an OpenSSL application (known as the connection <strong>SSL</strong> object). It is created by an application calling <a href=../../man3/SSL_new/ >SSL_new(3)</a>.</p><p>Separately a connection can have zero or more streams associated with it (although a connection with zero streams is probably not very useful, so normally you would have at least one). A stream is used to send and receive data between the two peers. Each stream is also represented by an <strong>SSL</strong> object. A stream is logically independent of all the other streams associated with the same connection. Data sent on a stream is guaranteed to be delivered in the order that it was sent within that stream. The same is not true across streams, e.g. if an application sends data on stream 1 first and then sends some more data on stream 2 second, then the remote peer may receive the data sent on stream 2 before it receives the data sent on stream 1.</p><p>Once the connection <strong>SSL</strong> object has completed its handshake (i.e. <a href=../../man3/SSL_connect/ >SSL_connect(3)</a> has returned 1), stream <strong>SSL</strong> objects are created by the application calling <a href=../../man3/SSL_new_stream/ >SSL_new_stream(3)</a> or <a href=../../man3/SSL_accept_stream/ >SSL_accept_stream(3)</a> (see <a href=#creating-new-streams>"CREATING NEW STREAMS"</a> below).</p><p>The same threading rules apply to <strong>SSL</strong> objects as for most OpenSSL objects (see <a href=../ossl-guide-libraries-introduction/ >ossl-guide-libraries-introduction(7)</a>). In particular most OpenSSL functions are thread safe, but the <strong>SSL</strong> object is not. This means that you can use an <strong>SSL</strong> object representing one stream at the same time as another thread is using a different <strong>SSL</strong> object for a different stream on the same connection. But you cannot use the same <strong>SSL</strong> object on two different threads at the same time (without additional application level locking).</p><h2 id=the-default-stream>THE DEFAULT STREAM<a class=headerlink href=#the-default-stream title="Permanent link">&para;</a></h2><p>A connection <strong>SSL</strong> object may also (optionally) be associated with a stream. This stream is known as the default stream. The default stream is automatically created and associated with the <strong>SSL</strong> object when the application calls <a href=../../man3/SSL_read/ >SSL_read_ex(3)</a>, <a href=../../man3/SSL_read/ >SSL_read(3)</a>, <a href=../../man3/SSL_write/ >SSL_write_ex(3)</a> or <a href=../../man3/SSL_write/ >SSL_write(3)</a> and passes the connection <strong>SSL</strong> object as a parameter.</p><p>If a client application calls <a href=../../man3/SSL_write/ >SSL_write_ex(3)</a> or <a href=../../man3/SSL_write/ >SSL_write(3)</a> first then (by default) the default stream will be a client-initiated bi-directional stream. If a client application calls <a href=../../man3/SSL_read/ >SSL_read_ex(3)</a> or <a href=../../man3/SSL_read/ >SSL_read(3)</a> first then the first stream initiated by the server will be used as the default stream (whether it is bi-directional or uni-directional).</p><p>This behaviour can be controlled via the default stream mode. See <a href=../../man3/SSL_set_default_stream_mode/ >SSL_set_default_stream_mode(3)</a> for further details.</p><p>It is recommended that new multi-stream applications should not use a default stream at all and instead should use a separate stream <strong>SSL</strong> object for each stream that is used. This requires calling <a href=../../man3/SSL_set_default_stream_mode/ >SSL_set_default_stream_mode(3)</a> and setting the mode to <strong>SSL_DEFAULT_STREAM_MODE_NONE</strong>.</p><h2 id=creating-new-streams>CREATING NEW STREAMS<a class=headerlink href=#creating-new-streams title="Permanent link">&para;</a></h2><p>An endpoint can create a new stream by calling <a href=../../man3/SSL_new_stream/ >SSL_new_stream(3)</a>. This creates a locally initiated stream. In order to do so you must pass the QUIC connection <strong>SSL</strong> object as a parameter. You can also specify whether you want a bi-directional or a uni-directional stream.</p><p>The function returns a new QUIC stream <strong>SSL</strong> object for sending and receiving data on that stream.</p><p>The peer may also initiate streams. An application can use the function <a href=../../man3/SSL_accept_stream/ >SSL_get_accept_stream_queue_len(3)</a> to determine the number of streams that the peer has initiated that are waiting for the application to handle. An application can call <a href=../../man3/SSL_accept_stream/ >SSL_accept_stream(3)</a> to create a new <strong>SSL</strong> object for a remotely initiated stream. If the peer has not initiated any then this call will block until one is available if the connection object is in blocking mode (see <a href=../../man3/SSL_set_blocking_mode/ >SSL_set_blocking_mode(3)</a>).</p><p>When using a default stream OpenSSL will prevent new streams from being accepted. To override this behaviour you must call <a href=../../man3/SSL_set_incoming_stream_policy/ >SSL_set_incoming_stream_policy(3)</a> to set the policy to <strong>SSL_INCOMING_STREAM_POLICY_ACCEPT</strong>. See the man page for further details. This is not relevant if the default stream has been disabled as described in <a href=#the-default-stream>"THE DEFAULT STREAM"</a> above.</p><p>Any stream may be bi-directional or uni-directional. If it is uni-directional then the initiator can write to it but not read from it, and vice-versa for the peer. You can determine what type of stream an <strong>SSL</strong> object represents by calling <a href=../../man3/SSL_get_stream_id/ >SSL_get_stream_type(3)</a>. See the man page for further details.</p><h2 id=using-a-stream-to-send-and-receive-data>USING A STREAM TO SEND AND RECEIVE DATA<a class=headerlink href=#using-a-stream-to-send-and-receive-data title="Permanent link">&para;</a></h2><p>Once you have a stream <strong>SSL</strong> object (which includes the connection <strong>SSL</strong> object if a default stream is in use) then you can send and receive data over it using the <a href=../../man3/SSL_write/ >SSL_write_ex(3)</a>, <a href=../../man3/SSL_write/ >SSL_write(3)</a>, <a href=../../man3/SSL_read/ >SSL_read_ex(3)</a> or <a href=../../man3/SSL_read/ >SSL_read(3)</a> functions. See the man pages for further details.</p><p>In the event of one of these functions not returning a success code then you should call <a href=../../man3/SSL_get_error/ >SSL_get_error(3)</a> to find out further details about the error. In blocking mode this will either be a fatal error (e.g. <strong>SSL_ERROR_SYSCALL</strong> or <strong>SSL_ERROR_SSL</strong>), or it will be <strong>SSL_ERROR_ZERO_RETURN</strong> which can occur when attempting to read data from a stream and the peer has indicated that the stream is concluded (i.e. "FIN" has been signalled on the stream). This means that the peer will send no more data on that stream. Note that the interpretation of <strong>SSL_ERROR_ZERO_RETURN</strong> is slightly different for a QUIC application compared to a TLS application. In TLS it occurs when the connection has been shutdown by the peer. In QUIC this only tells you that the current stream has been concluded by the peer. It tells you nothing about the underlying connection. If the peer has concluded the stream then no more data will be received on it, however an application can still send data to the peer until the send side of the stream has also been concluded. This can happen by the application calling <a href=../../man3/SSL_stream_conclude/ >SSL_stream_conclude(3)</a>. It is an error to attempt to send more data on a stream after <a href=../../man3/SSL_stream_conclude/ >SSL_stream_conclude(3)</a> has been called.</p><p>It is also possible to abandon a stream abnormally by calling <a href=../../man3/SSL_stream_reset/ >SSL_stream_reset(3)</a>.</p><p>Once a stream object is no longer needed it should be freed via a call to <a href=../../man3/SSL_free/ >SSL_free(3)</a>. An application should not call <a href=../../man3/SSL_shutdown/ >SSL_shutdown(3)</a> on it since this is only meaningful for connection level <strong>SSL</strong> objects. Freeing the stream will automatically signal STOP_SENDING to the peer.</p><h2 id=streams-and-connections>STREAMS AND CONNECTIONS<a class=headerlink href=#streams-and-connections title="Permanent link">&para;</a></h2><p>Given a stream object it is possible to get the <strong>SSL</strong> object corresponding to the connection via a call to <a href=../../man3/SSL_get0_connection/ >SSL_get0_connection(3)</a>. Multi-threaded restrictions apply so care should be taken when using the returned connection object. Specifically, if you are handling each of your stream objects in a different thread and call <a href=../../man3/SSL_get0_connection/ >SSL_get0_connection(3)</a> from within that thread then you must be careful to not to call any function that uses the connection object at the same time as one of the other threads is also using that connection object (with the exception of <a href=../../man3/SSL_accept_stream/ >SSL_accept_stream(3)</a> and <a href=../../man3/SSL_accept_stream/ >SSL_get_accept_stream_queue_len(3)</a> which are thread-safe).</p><p>A stream object does not inherit all its settings and values from its parent <strong>SSL</strong> connection object. Therefore certain function calls that are relevant to the connection as a whole will not work on a stream. For example the function <a href=../../man3/SSL_get_certificate/ >SSL_get_certificate(3)</a> can be used to obtain a handle on the peer certificate when called with a connection <strong>SSL</strong> object. When called with a stream <strong>SSL</strong> object it will return NULL.</p><h2 id=simple-multi-stream-quic-client-example>SIMPLE MULTI-STREAM QUIC CLIENT EXAMPLE<a class=headerlink href=#simple-multi-stream-quic-client-example title="Permanent link">&para;</a></h2><p>This section will present various source code samples demonstrating how to write a simple multi-stream QUIC client application which connects to a server, send some HTTP/1.0 requests to it, and read back the responses. Note that HTTP/1.0 over QUIC is non-standard and will not be supported by real world servers. This is for demonstration purposes only.</p><p>We will build on the example code for the simple blocking QUIC client that is covered on the <a href=../ossl-guide-quic-client-block/ >ossl-guide-quic-client-block(7)</a> page and we assume that you are familiar with it. We will only describe the differences between the simple blocking QUIC client and the multi-stream QUIC client. Although the example code uses blocking <strong>SSL</strong> objects, you can equally use nonblocking <strong>SSL</strong> objects. See <a href=../ossl-guide-quic-client-non-block/ >ossl-guide-quic-client-non-block(7)</a> for more information about writing a nonblocking QUIC client.</p><p>The complete source code for this example multi-stream QUIC client is available in the <code>demos/guide</code> directory of the OpenSSL source distribution in the file <code>quic-multi-stream.c</code>. It is also available online at <a href=https://github.com/openssl/openssl/blob/master/demos/guide/quic-multi-stream.c>https://github.com/openssl/openssl/blob/master/demos/guide/quic-multi-stream.c</a>.</p><h3 id=disabling-the-default-stream>Disabling the default stream<a class=headerlink href=#disabling-the-default-stream title="Permanent link">&para;</a></h3><p>As discussed above in <a href=#the-default-stream>"THE DEFAULT STREAM"</a> we will follow the recommendation to disable the default stream for our multi-stream client. To do this we call the <a href=../../man3/SSL_set_default_stream_mode/ >SSL_set_default_stream_mode(3)</a> function and pass in our connection <strong>SSL</strong> object and the value <strong>SSL_DEFAULT_STREAM_MODE_NONE</strong>.</p><div class=highlight><pre><span></span><code>/*
 * We will use multiple streams so we will disable the default stream mode.
 * This is not a requirement for using multiple streams but is recommended.
 */
if (!SSL_set_default_stream_mode(ssl, SSL_DEFAULT_STREAM_MODE_NONE)) {
    printf(&quot;Failed to disable the default stream mode\n&quot;);
    goto end;
}
</code></pre></div><h3 id=creating-the-request-streams>Creating the request streams<a class=headerlink href=#creating-the-request-streams title="Permanent link">&para;</a></h3><p>For the purposes of this example we will create two different streams to send two different HTTP requests to the server. For the purposes of demonstration the first of these will be a bi-directional stream and the second one will be a uni-directional one:</p><div class=highlight><pre><span></span><code>/*
 * We create two new client initiated streams. The first will be
 * bi-directional, and the second will be uni-directional.
 */
stream1 = SSL_new_stream(ssl, 0);
stream2 = SSL_new_stream(ssl, SSL_STREAM_FLAG_UNI);
if (stream1 == NULL || stream2 == NULL) {
    printf(&quot;Failed to create streams\n&quot;);
    goto end;
}
</code></pre></div><h3 id=writing-data-to-the-streams>Writing data to the streams<a class=headerlink href=#writing-data-to-the-streams title="Permanent link">&para;</a></h3><p>Once the streams are successfully created we can start writing data to them. In this example we will be sending a different HTTP request on each stream. To avoid repeating too much code we write a simple helper function to send an HTTP request to a stream:</p><div class=highlight><pre><span></span><code>int write_a_request(SSL *stream, const char *request_start,
                    const char *hostname)
{
    const char *request_end = &quot;\r\n\r\n&quot;;
    size_t written;

    if (!SSL_write_ex(stream, request_start, strlen(request_start), &amp;written))
        return 0;
    if (!SSL_write_ex(stream, hostname, strlen(hostname), &amp;written))
        return 0;
    if (!SSL_write_ex(stream, request_end, strlen(request_end), &amp;written))
        return 0;

    return 1;
}
</code></pre></div><p>We assume the strings <strong>request1_start</strong> and <strong>request2_start</strong> hold the appropriate HTTP requests. We can then call our helper function above to send the requests on the two streams. For the sake of simplicity this example does this sequentially, writing to <strong>stream1</strong> first and, when this is successful, writing to <strong>stream2</strong> second. Remember that our client is blocking so these calls will only return once they have been successfully completed. A real application would not need to do these writes sequentially or in any particular order. For example we could start two threads (one for each stream) and write the requests to each stream simultaneously.</p><div class=highlight><pre><span></span><code>/* Write an HTTP GET request on each of our streams to the peer */
if (!write_a_request(stream1, request1_start, hostname)) {
    printf(&quot;Failed to write HTTP request on stream 1\n&quot;);
    goto end;
}

if (!write_a_request(stream2, request2_start, hostname)) {
    printf(&quot;Failed to write HTTP request on stream 2\n&quot;);
    goto end;
}
</code></pre></div><h3 id=reading-data-from-a-stream>Reading data from a stream<a class=headerlink href=#reading-data-from-a-stream title="Permanent link">&para;</a></h3><p>In this example <strong>stream1</strong> is a bi-directional stream so, once we have sent the request on it, we can attempt to read the response from the server back. Here we just repeatedly call <a href=../../man3/SSL_read/ >SSL_read_ex(3)</a> until that function fails (indicating either that there has been a problem, or that the peer has signalled the stream as concluded).</p><div class=highlight><pre><span></span><code>printf(&quot;Stream 1 data:\n&quot;);
/*
 * Get up to sizeof(buf) bytes of the response from stream 1 (which is a
 * bidirectional stream). We keep reading until the server closes the
 * connection.
 */
while (SSL_read_ex(stream1, buf, sizeof(buf), &amp;readbytes)) {
    /*
    * OpenSSL does not guarantee that the returned data is a string or
    * that it is NUL terminated so we use fwrite() to write the exact
    * number of bytes that we read. The data could be non-printable or
    * have NUL characters in the middle of it. For this simple example
    * we&#39;re going to print it to stdout anyway.
    */
    fwrite(buf, 1, readbytes, stdout);
}
/* In case the response didn&#39;t finish with a newline we add one now */
printf(&quot;\n&quot;);
</code></pre></div><p>In a blocking application like this one calls to <a href=../../man3/SSL_read/ >SSL_read_ex(3)</a> will either succeed immediately returning data that is already available, or they will block waiting for more data to become available and return it when it is, or they will fail with a 0 response code.</p><p>Once we exit the while loop above we know that the last call to <a href=../../man3/SSL_read/ >SSL_read_ex(3)</a> gave a 0 response code so we call the <a href=../../man3/SSL_get_error/ >SSL_get_error(3)</a> function to find out more details. Since this is a blocking application this will either return <strong>SSL_ERROR_SYSCALL</strong> or <strong>SSL_ERROR_SSL</strong> indicating a fundamental problem, or it will return <strong>SSL_ERROR_ZERO_RETURN</strong> indicating that the stream is concluded and there will be no more data available to read from it. Care must be taken to distinguish between an error at the stream level (i.e. a stream reset) and an error at the connection level (i.e. a connection closed). The <a href=../../man3/SSL_get_stream_read_state/ >SSL_get_stream_read_state(3)</a> function can be used to distinguish between these different cases.</p><div class=highlight><pre><span></span><code>/*
 * Check whether we finished the while loop above normally or as the
 * result of an error. The 0 argument to SSL_get_error() is the return
 * code we received from the SSL_read_ex() call. It must be 0 in order
 * to get here. Normal completion is indicated by SSL_ERROR_ZERO_RETURN. In
 * QUIC terms this means that the peer has sent FIN on the stream to
 * indicate that no further data will be sent.
 */
switch (SSL_get_error(stream1, 0)) {
case SSL_ERROR_ZERO_RETURN:
    /* Normal completion of the stream */
    break;

case SSL_ERROR_SSL:
    /*
     * Some stream fatal error occurred. This could be because of a stream
     * reset - or some failure occurred on the underlying connection.
     */
    switch (SSL_get_stream_read_state(stream1)) {
    case SSL_STREAM_STATE_RESET_REMOTE:
        printf(&quot;Stream reset occurred\n&quot;);
        /* The stream has been reset but the connection is still healthy. */
        break;

    case SSL_STREAM_STATE_CONN_CLOSED:
        printf(&quot;Connection closed\n&quot;);
        /* Connection is already closed. Skip SSL_shutdown() */
        goto end;

    default:
        printf(&quot;Unknown stream failure\n&quot;);
        break;
    }
    break;

default:
    /* Some other unexpected error occurred */
    printf (&quot;Failed reading remaining data\n&quot;);
    break;
}
</code></pre></div><h3 id=accepting-an-incoming-stream>Accepting an incoming stream<a class=headerlink href=#accepting-an-incoming-stream title="Permanent link">&para;</a></h3><p>Our <strong>stream2</strong> object that we created above was a uni-directional stream so it cannot be used to receive data from the server. In this hypothetical example we assume that the server initiates a new stream to send us back the data that we requested. To do that we call <a href=../../man3/SSL_accept_stream/ >SSL_accept_stream(3)</a>. Since this is a blocking application this will wait indefinitely until the new stream has arrived and is available for us to accept. In the event of an error it will return <strong>NULL</strong>.</p><div class=highlight><pre><span></span><code>/*
 * In our hypothetical HTTP/1.0 over QUIC protocol that we are using we
 * assume that the server will respond with a server initiated stream
 * containing the data requested in our uni-directional stream. This doesn&#39;t
 * really make sense to do in a real protocol, but its just for
 * demonstration purposes.
 *
 * We&#39;re using blocking mode so this will block until a stream becomes
 * available. We could override this behaviour if we wanted to by setting
 * the SSL_ACCEPT_STREAM_NO_BLOCK flag in the second argument below.
 */
stream3 = SSL_accept_stream(ssl, 0);
if (stream3 == NULL) {
    printf(&quot;Failed to accept a new stream\n&quot;);
    goto end;
}
</code></pre></div><p>We can now read data from the stream in the same way that we did for <strong>stream1</strong> above. We won't repeat that here.</p><h3 id=cleaning-up-the-streams>Cleaning up the streams<a class=headerlink href=#cleaning-up-the-streams title="Permanent link">&para;</a></h3><p>Once we have finished using our streams we can simply free them by calling <a href=../../man3/SSL_free/ >SSL_free(3)</a>. Optionally we could call <a href=../../man3/SSL_stream_conclude/ >SSL_stream_conclude(3)</a> on them if we want to indicate to the peer that we won't be sending them any more data, but we don't do that in this example because we assume that the HTTP application protocol supplies sufficient information for the peer to know when we have finished sending request data.</p><p>We should not call <a href=../../man3/SSL_shutdown/ >SSL_shutdown(3)</a> or <a href=../../man3/SSL_shutdown/ >SSL_shutdown_ex(3)</a> on the stream objects since those calls should not be used for streams.</p><div class=highlight><pre><span></span><code>SSL_free(stream1);
SSL_free(stream2);
SSL_free(stream3);
</code></pre></div><h2 id=see-also>SEE ALSO<a class=headerlink href=#see-also title="Permanent link">&para;</a></h2><p><a href=../ossl-guide-introduction/ >ossl-guide-introduction(7)</a>, <a href=../ossl-guide-libraries-introduction/ >ossl-guide-libraries-introduction(7)</a>, <a href=../ossl-guide-libssl-introduction/ >ossl-guide-libssl-introduction(7)</a> <a href=../ossl-guide-quic-introduction/ >ossl-guide-quic-introduction(7)</a>, <a href=../ossl-guide-quic-client-block/ >ossl-guide-quic-client-block(7)</a></p><h2 id=copyright>COPYRIGHT<a class=headerlink href=#copyright title="Permanent link">&para;</a></h2><p>Copyright 2023 The OpenSSL Project Authors. All Rights Reserved.</p><p>Licensed under the Apache License 2.0 (the "License"). You may not use this file except in compliance with the License. You can obtain a copy in the file LICENSE in the source distribution or at <a href=https://www.openssl.org/source/license.html>https://www.openssl.org/source/license.html</a>.</p></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div></main><footer class=md-footer><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.path", "navigation.prune", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "master", "provider": "mike"}}</script><script src=../../assets/javascripts/bundle.ad660dcc.min.js></script></body></html>